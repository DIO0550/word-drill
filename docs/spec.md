# word-drill 仕様書

## 概要

英単語・プログラミング英語・IT用語を4択クイズ形式で学習できるWebアプリケーション。
GitHub Pagesでホスティングし、学習履歴はIndexedDBでローカル保存する。

## 技術スタック

- Vite + React + TypeScript
- React Router (HashRouter)
- IndexedDB (vanilla)
- GitHub Pages + GitHub Actions

---

## カテゴリ体系

### 英単語

| ID | 名前 | 説明 |
|----|------|------|
| `en-general` | 一般 | 日常・ビジネス英語 |
| `en-toeic` | TOEIC | TOEIC頻出単語 |
| `en-technical-docs` | 技術文書 | 論文・ドキュメント頻出表現 |

### プログラミング英語

| ID | 名前 | 説明 |
|----|------|------|
| `prog-common` | 共通 | 言語問わず使う英単語 |
| `prog-rust` | Rust | ownership, borrowing, lifetime など |
| `prog-javascript` | JavaScript | hoisting, closure, prototype など |
| `prog-go` | Go | goroutine, defer, channel など |

### IT用語

| ID | 名前 | 説明 |
|----|------|------|
| `it-programming` | プログラミング概念 | OOP, デザインパターン, アルゴリズム |
| `it-infra` | インフラ | クラウド, コンテナ, ネットワーク |
| `it-security` | セキュリティ | 脆弱性, 認証, 暗号化 |
| `it-database` | データベース | SQL, NoSQL, トランザクション |

---

## ページ構成

### ルーティング

```
/                    トップ（大カテゴリ選択）
/category/:id        サブカテゴリ選択 + 設定
/quiz/:subCategory   クイズ実行
/stats               学習統計
```

### 画面遷移

```
[トップ] → [カテゴリ+設定] → [クイズ]
  1クリック    2クリック      開始
```

---

## 各ページ詳細

### / (トップ)

大カテゴリを選択する画面。

**表示内容**
- 大カテゴリのカード（3つ）
  - カテゴリ名
  - 登録問題数
  - 正答率（学習済みの場合）
- ヘッダーに統計ページへのリンク

**レイアウトイメージ**
```
┌─────────────────────────────────┐
│  word-drill              [統計] │
├─────────────────────────────────┤
│                                 │
│  ┌─────────┐ ┌─────────┐       │
│  │ 英単語   │ │ プログラ │       │
│  │ 85問    │ │ ミング   │       │
│  │         │ │ 英語     │       │
│  └─────────┘ │ 115問   │       │
│              └─────────┘       │
│  ┌─────────┐                   │
│  │ IT用語  │                   │
│  │ 92問    │                   │
│  └─────────┘                   │
│                                 │
└─────────────────────────────────┘
```

### /category/:id (サブカテゴリ + 設定)

サブカテゴリの選択と設定を1画面で行う。

**表示内容**
- 大カテゴリ名
- サブカテゴリ一覧（ラジオボタン）
  - サブカテゴリ名
  - 問題数
- 設定項目
  - 問題数: 10 / 20 / 全部
  - 出題モード: 意味を当てる / 用語を当てる / ランダム
- 「開始する」ボタン

**レイアウトイメージ**
```
┌─────────────────────────────────┐
│  ← 戻る    プログラミング英語    │
├─────────────────────────────────┤
│                                 │
│  サブカテゴリを選択              │
│  ┌─────────────────────────┐   │
│  │ ◉ 共通 (42問)           │   │
│  │ ○ Rust (25問)           │   │
│  │ ○ JavaScript (30問)     │   │
│  │ ○ Go (18問)             │   │
│  └─────────────────────────┘   │
│                                 │
│  問題数                         │
│  [10 ▼]                        │
│                                 │
│  出題モード                     │
│  [意味を当てる ▼]               │
│                                 │
│  ┌─────────────────────────┐   │
│  │        開始する          │   │
│  └─────────────────────────┘   │
│                                 │
└─────────────────────────────────┘
```

### /quiz/:subCategory (クイズ実行)

クイズの実行画面。

**進行中の表示**
- 進捗 (3 / 10)
- 問題文（用語 or 意味）
- 例文（あれば）
- 4択の選択肢ボタン

**回答後の表示**
- 正解/不正解のフィードバック
- 正しい答えと解説
- 「次へ」ボタン

**終了時の表示**
- 正答数 / 問題数
- 正答率（%）
- ボタン
  - 「もう一度」
  - 「カテゴリに戻る」
  - 「トップに戻る」

### /stats (学習統計)

学習の進捗を確認する画面。

**全体統計**
- 総回答数
- 全体正答率
- 学習日数
- 連続学習日数

**カテゴリ別統計**
- 各カテゴリの正答率（プログレスバー）
- 回答数も併記

**苦手リスト**
- 正答率50%以下の問題一覧
- 用語、正答率、回答回数を表示

**操作**
- 「履歴をリセット」ボタン（確認ダイアログ付き）

---

## データ構造

### 問題データ

```ts
type Question = {
  id: string           // 一意のID (例: "prog-rust-001")
  category: string     // サブカテゴリID
  term: string         // 用語・単語
  meaning: string      // 意味・説明
  choices: string[]    // 4択の選択肢
  answer: number       // 正解のインデックス (0-3)
  example?: string     // 例文（任意）
}
```

### カテゴリデータ

```ts
type Category = {
  id: string           // 大カテゴリID
  name: string         // 表示名
  subCategories: SubCategory[]
}

type SubCategory = {
  id: string           // サブカテゴリID
  name: string         // 表示名
  description: string  // 説明
}
```

---

## IndexedDB スキーマ

**データベース名**: `word-drill`  
**バージョン**: 1

### Object Stores

#### history (回答履歴)

| フィールド | 型 | 説明 |
|------------|-----|------|
| id | number | 自動採番の主キー |
| questionId | string | 問題ID |
| category | string | サブカテゴリID |
| correct | boolean | 正解したか |
| timestamp | number | 回答日時 (Unix ms) |

**インデックス**
- `questionId` - 問題別の集計用
- `category` - カテゴリ別の集計用
- `timestamp` - 日付フィルタ用

#### stats (問題別統計)

| フィールド | 型 | 説明 |
|------------|-----|------|
| questionId | string | 問題ID（主キー） |
| correctCount | number | 正解数 |
| wrongCount | number | 不正解数 |
| lastAnswered | number | 最終回答日時 |

---

## 将来の拡張候補

- [ ] 問題の追加・編集UI
- [ ] JSONインポート/エクスポート
- [ ] PWA対応（オフライン学習）
- [ ] ダークモード切り替え
- [ ] 復習モード（苦手な問題を優先出題）
- [ ] スペースドリピティション（間隔反復）
